/*!
 * jQuery DoubleConfirm Plugin 1.0.0
 * https://github.com/cerlestes/jQuery-DoubleConfirm
 *
 * Copyright 2013, Kevin Fischer
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function($,window){var DoubleConfirm=function($element,options){this.$element=$element;this.options=options;this.countdown=-1;this.countdownTimeoutId=0;this.cooldownTimeoutId=0;this.original="";var that=this;this.$element.on("click.double-confirm",function(e){that.onClick(e)})};DoubleConfirm.DEFAULTS={countdown:3,countdownFormat:"Really ${original}? ${counterp}",countdownCss:"disabled",cooldown:10,cooldownCss:"",onCountdown:null,onCooldown:null,onReset:null};DoubleConfirm.prototype.format=function(format){if(typeof format==="undefined"){format=this.options.countdownFormat}return(typeof format==="function")?format(this):format.replace("${original}",this.original).replace("${counter}",this.countdown).replace("${counterp}",((this.countdown>0)?"("+this.countdown+")":""))};DoubleConfirm.prototype.onClick=function(e){if(this.countdown!==0){e.preventDefault();e.stopPropagation();if(this.countdown===-1){this.doCountdown()}}};DoubleConfirm.prototype.doCountdown=function(){this.original=$.trim(this.$element.html());this.countdown=parseInt(this.options.countdown);this.$element.toggleClass(this.options.countdownCss);this.$element.blur();this.tick();if($.isFunction(this.options.onCountdown)){this.options.onCountdown(this)}};DoubleConfirm.prototype.doCooldown=function(){this.$element.html(this.format());this.$element.toggleClass(this.options.countdownCss);this.$element.toggleClass(this.options.cooldownCss);this.cooldown();if($.isFunction(this.options.onCooldown)){this.options.onCooldown(this)}};DoubleConfirm.prototype.doReset=function(){this.countdown=-1;this.$element.html(this.original);this.$element.toggleClass(this.options.cooldownCss);if($.isFunction(this.options.onReset)){this.options.onReset(this)}};DoubleConfirm.prototype.tick=function(){if(this.countdown>0){this.$element.html(this.format());this.countdown--;var that=this;this.countdownTimeoutId=setTimeout(function(){that.tick()},1000)}else{this.doCooldown()}};DoubleConfirm.prototype.cooldown=function(){if(this.countdown===0){var that=this;this.cooldownTimeoutId=setTimeout(function(){that.doReset()},(parseInt(this.options.cooldown)*1000))}};$.fn.doubleConfirm=function(options){var args=Array.prototype.slice.call(arguments,1);return $(this).each(function(){var $this=$(this);var instance=$this.data("double-confirm");if(!instance){instance=new DoubleConfirm($this,$.extend({},DoubleConfirm.DEFAULTS,$this.data(),options));$this.data("double-confirm",instance)}if(typeof options==="string"&&typeof instance[options]==="function"){instance[options].apply(instance,args)}})};$.doubleConfirm=function(method,arg1,arg2){switch(method){case"setDefault":if(typeof arg1==="object"){$.extend(DoubleConfirm.DEFAULTS,arg1)}else{if(typeof arg1==="string"){DoubleConfirm.DEFAULTS[arg1]=arg2}}break}};$(document).on("click.double-confirm.data-api",'[data-toggle="double-confirm"]',function(e){$(this).doubleConfirm("onClick",e)})})(window.jQuery,window);