/*!
 * jQuery DoubleConfirm Plugin 2.0.1
 * https://github.com/cerlestes/jQuery-DoubleConfirm
 *
 * Copyright 2013, Kevin Fischer
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(c,a){var b=function(d,e){this.$element=d;this.options=e;this.countdown=-1;this.countdownTimeoutId=0;this.cooldownTimeoutId=0;this.original="";this.currentCountdownClasses=[];this.currentCooldownClasses=[];var f=this;this.$element.on("click.double-confirm",function(g){f.onClick(g)})};b.DEFAULTS={format:"Really ##original##? ##counterp##",countdown:2,countdownCss:"disabled",cooldown:10,cooldownCss:"",onCountdown:null,onCooldown:null,onReset:null};b.prototype.format=function(d){if(typeof d==="undefined"){d=this.options.format}while(typeof d==="function"){d=d(this)}return d.replace("##original##",this.original).replace("##counter##",this.countdown).replace("##counterp##",((this.countdown>0)?"("+this.countdown+")":""))};b.prototype.onClick=function(d){if(this.countdown!==0){d.preventDefault();d.stopPropagation();if(this.countdown===-1){this.doCountdown()}}};b.prototype.doCountdown=function(){var d=this.$element.attr("class").split(/\s+/);this.currentCountdownClasses=this.options.countdownCss.split(/\s+/).filter(function(e){return d.indexOf(e)===-1}).join(" ");this.original=c.trim(this.$element.html());this.countdown=parseInt(this.options.countdown,10);this.$element.addClass(this.currentCountdownClasses);this.$element.blur();this.tick();if(c.isFunction(this.options.onCountdown)){this.options.onCountdown(this)}};b.prototype.doCooldown=function(){this.$element.html(this.format());this.$element.removeClass(this.currentCountdownClasses.join(" "));var d=this.$element.attr("class").split(/\s+/);this.currentCooldownClasses=this.options.cooldownCss.split(/\s+/).filter(function(e){return d.indexOf(e)===-1}).join(" ");this.$element.addClass(this.currentCooldownClasses);this.cooldown();if(c.isFunction(this.options.onCooldown)){this.options.onCooldown(this)}};b.prototype.doReset=function(){this.countdown=-1;this.$element.html(this.original);this.$element.removeClass(this.currentCooldownClasses);if(c.isFunction(this.options.onReset)){this.options.onReset(this)}};b.prototype.tick=function(){if(this.countdown>0){this.$element.html(this.format());this.countdown--;var d=this;this.countdownTimeoutId=setTimeout(function(){d.tick()},1000)}else{this.doCooldown()}};b.prototype.cooldown=function(){if(this.countdown===0){var d=this;this.cooldownTimeoutId=setTimeout(function(){d.doReset()},(parseInt(this.options.cooldown,10)*1000))}};c.fn.doubleConfirm=function(e){var d=Array.prototype.slice.call(arguments,1);return c(this).each(function(){var g=c(this);var f=g.data("double-confirm");if(!f){f=new b(g,c.extend({},b.DEFAULTS,g.data(),e));g.data("double-confirm",f)}if(typeof e==="string"&&typeof f[e]==="function"){f[e].apply(f,d)}})};c.doubleConfirm=function(f,e,d){switch(f){case"setDefault":if(typeof e==="object"){c.extend(b.DEFAULTS,e)}else{if(typeof e==="string"){b.DEFAULTS[e]=d}}break;default:break}};c(document).on("click.double-confirm.data-api",'[data-toggle="double-confirm"]',function(d){c(this).doubleConfirm("onClick",d)})})(window.jQuery,window);
